// Incident History & Resolution Page Styles
@use '@carbon/react/scss/spacing' as *;
@use '@carbon/react/scss/theme' as *;
@use '@carbon/react/scss/type' as *;
@use '@carbon/react/scss/type' as react;
@use '@carbon/colors' as *;

.incident-history-page {
  width: 100%;

  // KPI Card Skeleton
  .kpi-card-skeleton {
    display: flex;
    flex-direction: column;
    gap: $spacing-03;
  }

  // KPI Row
  .kpi-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: $spacing-05;
    margin-bottom: $spacing-06;

    @media (max-width: 1056px) {
      grid-template-columns: repeat(2, 1fr);
    }

    @media (max-width: 672px) {
      grid-template-columns: 1fr;
    }
  }

  // Content wrapper
  &__content {
    display: flex;
    flex-direction: column;
    gap: $spacing-05;
  }

  // Split Layout (2/3 + 1/3)
  &__split-layout {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: $spacing-05;
    align-items: start;

    @media (max-width: 1056px) {
      grid-template-columns: 1fr;
    }
  }

  // Left Column
  &__left-column {
    display: flex;
    flex-direction: column;
    gap: $spacing-05;
  }

  // Right Column
  &__right-column {
    display: flex;
    flex-direction: column;
    gap: $spacing-05;
  }

  // Chart Tile
  &__chart-tile {

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: $spacing-05;
      gap: $spacing-04;
      flex-wrap: wrap;

      h3 {
        @include react.type-style('heading-compact-02');
        margin: 0;
      }

      .chart-subtitle {
        @include react.type-style('body-compact-01');
        color: $text-secondary;
        margin: $spacing-02 0 0 0;
      }

      .chart-title-group {
        display: flex;
        flex-direction: column;
      }
    }

    .chart-legend-custom {
      display: flex;
      gap: $spacing-04;
      align-items: center;

      .legend-item {
        display: flex;
        align-items: center;
        gap: $spacing-02;
        @include react.type-style('label-01');
        color: $text-secondary;
      }

      .legend-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        flex-shrink: 0;

        &--critical {
          background-color: $support-error;
        }

        &--major {
          background-color: $support-warning;
        }

        &--minor {
          background-color: $interactive;
        }
      }
    }

    .chart-container {
      min-height: 280px;
    }
  }

  // Table Tile
  &__table-tile {

    .table-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid $border-subtle-01;
      gap: $spacing-04;
      flex-wrap: wrap;

      &__left {
        display: flex;
        align-items: center;
        gap: $spacing-04;
        flex-wrap: wrap;
        flex: 1;

        h3 {
          @include react.type-style('heading-compact-02');
          margin: 0;
          white-space: nowrap;
        }
      }

      .table-search {
        max-width: 240px;
      }
    }

    // Table cell styles
    .incident-id-cell {
      .incident-id {
        @include react.type-style('code-01');
        color: $link-primary;
        font-weight: 600;
      }
    }

    .incident-date-cell {
      color: $text-secondary;
      @include react.type-style('body-compact-01');
    }

    .incident-summary-cell {
      .incident-summary-text {
        @include react.type-style('body-compact-01');
        font-weight: 500;
      }
    }

    // Expanded Row
    .incident-expanded-content {
      border-left: 3px solid $link-primary;
      display: flex;
      flex-direction: column;
      gap: $spacing-04;

      .incident-expanded-row {
        display: flex;
        align-items: flex-start;
        gap: $spacing-05;

        .incident-expanded-label {
          @include react.type-style('body-compact-01');
          font-weight: 700;
          color: $text-primary;
          min-width: 100px;
          flex-shrink: 0;
        }

        .incident-expanded-text {
          @include react.type-style('body-compact-01');
          color: $text-secondary;
          margin: 0;
          line-height: 1.5;
        }
      }
    }
  }

  // Donut Tile
  &__donut-tile {

    .tile-title {
      @include react.type-style('heading-compact-02');
      margin: 0 0 $spacing-04 0;
    }

    .chart-container {
      min-height: 260px;
    }
  }

  // Prevention Tile
  &__prevention-tile {

    .prevention-header {
      border-bottom: 1px solid $border-subtle-01;

      &__title-row {
        display: flex;
        align-items: center;
        gap: $spacing-03;

        h3 {
          @include react.type-style('heading-compact-02');
          margin: 0;
        }
      }

      &__icon {
        color: $support-success;
        flex-shrink: 0;
      }

      &__subtitle {
        @include react.type-style('label-01');
        color: $text-secondary;
        margin: $spacing-02 0 0 0;
      }
    }

    .prevention-list {
      display: flex;
      flex-direction: column;
      gap: $spacing-04;
    }

    .prevention-empty {
      @include react.type-style('body-compact-01');
      color: $text-secondary;
      text-align: center;
    }

    .prevention-divider {
      height: 1px;
      background: $border-subtle-01;
      margin-bottom: $spacing-02;
    }

    .prevention-item {
      display: flex;
      gap: $spacing-04;
      padding-top: $spacing-02;

      &__badge-col {
        padding-top: $spacing-01;
        flex-shrink: 0;
      }

      &__badge {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: $white-0;
        @include react.type-style('label-01');
        font-weight: 700;
        background-color: var(--badge-bg, $interactive);
      }

      &__content {
        flex: 1;
        min-width: 0;
      }

      &__title {
        @include react.type-style('body-compact-01');
        font-weight: 700;
        color: $text-primary;
        margin: 0 0 $spacing-02 0;
      }

      &__description {
        @include react.type-style('label-01');
        color: $text-secondary;
        margin: 0;
        line-height: 1.5;
      }

      &__action {
        margin-top: $spacing-03;
        padding-left: 0;
        @include react.type-style('label-01');
      }
    }
  }

  // Archive Tile
  &__archive-tile {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, $layer-01 0%, $layer-02 100%);
    border: 1px solid $border-subtle-01;

    .archive-info {
      display: flex;
      flex-direction: column;
      gap: $spacing-01;
    }

    .archive-title {
      @include react.type-style('body-compact-01');
      font-weight: 700;
      color: $text-primary;
    }

    .archive-subtitle {
      @include react.type-style('label-01');
      color: $text-secondary;
    }

    .archive-button {
      flex-shrink: 0;
      border: 1px solid $border-subtle-01;
    }
  }
}
